<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Inventaire Maison</title>
    <base href="/Stoksy/">
    
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üè† Mon Inventaire</div>
            <div class="header-controls">
                <button class="theme-toggle" id="themeToggle">üåô</button>
            </div>
        </div>

        <div class="stats-grid" id="statsGrid">
            <div class="stat-card"><div class="stat-value" id="totalItems">0</div><div class="stat-label">Articles total</div></div>
            <div class="stat-card"><div class="stat-value" id="expiringItems">0</div><div class="stat-label">Expires bient√¥t</div></div>
            <div class="stat-card"><div class="stat-value" id="totalRooms">7</div><div class="stat-label">Pi√®ces</div></div>
            <div class="stat-card"><div class="stat-value" id="lowStockItems">0</div><div class="stat-label">Stock faible</div></div>
        </div>

        <div class="search-controls">
            <div class="search-row">
                <div class="search-input-group">
                    <input type="text" id="searchBar" placeholder="Rechercher un article...">
                    <div class="search-suggestions" id="searchSuggestions"></div>
                </div>
                <button class="btn btn-primary" id="addItemBtn">Ajouter un article</button>
            </div>
            
            <div class="filter-row">
                <select id="roomFilter">
                    <option value="">Toutes les pi√®ces</option>
                    <option value="cuisine">Cuisine</option>
                    <option value="salon">Salon</option>
                    <option value="chambre">Chambre</option>
                    <option value="salle-bain">Salle de bain</option>
                    <option value="bureau">Bureau</option>
                    <option value="garage">Garage</option>
                    <option value="cave">Cave</option>
                </select>
                
                <select id="typeFilter">
                    <option value="">Tous les types</option>
                    <option value="consommable">Consommable</option>
                    <option value="non-consommable">Non-consommable</option>
                </select>
                
                <select id="expiryFilter">
                    <option value="">Toutes les dates</option>
                    <option value="soon">Expire bient√¥t</option>
                    <option value="expired">Expir√©</option>
                    <option value="ok">Date OK</option>
                </select>

                <button class="btn-ghost" id="viewToggleBtn">Vue Carte</button>
            </div>
        </div>
        
        <div class="list-view" id="listView">
            <div class="category-list" id="categoryList">
                </div>
        </div>

        <div class="house-map hidden" id="houseMap">
            <h3 style="text-align: center;
margin-bottom: 30px; color: #2c3e50; font-size: 22px;">üè† Plan de la maison</h3>
            <div class="floor-plan">
                <div class="room clickable-room" data-room="cuisine" onclick="window.filterByRoom('cuisine')"><div class="room-icon">üç≥</div><div class="room-name">Cuisine</div><div class="room-count" id="cuisine-count">0</div></div>
                <div class="room clickable-room" data-room="salon" onclick="window.filterByRoom('salon')"><div class="room-icon">üõãÔ∏è</div><div class="room-name">Salon</div><div class="room-count" id="salon-count">0</div></div>
                <div class="room clickable-room" data-room="chambre" onclick="window.filterByRoom('chambre')"><div class="room-icon">üõèÔ∏è</div><div class="room-name">Chambre</div><div class="room-count" id="chambre-count">0</div></div>
                <div class="room clickable-room" data-room="salle-bain" onclick="window.filterByRoom('salle-bain')"><div class="room-icon">üõÅ</div><div class="room-name">Salle de bain</div><div class="room-count" id="salle-bain-count">0</div></div>
                <div class="room clickable-room" data-room="bureau" onclick="window.filterByRoom('bureau')"><div class="room-icon">üíº</div><div class="room-name">Bureau</div><div class="room-count" id="bureau-count">0</div></div>
                <div class="room clickable-room" data-room="garage" onclick="window.filterByRoom('garage')"><div class="room-icon">üîß</div><div class="room-name">Garage</div><div class="room-count" id="garage-count">0</div></div>
                <div class="room clickable-room" data-room="cave" onclick="window.filterByRoom('cave')"><div class="room-icon">üç∑</div><div class="room-name">Cave</div><div class="room-count" id="cave-count">0</div></div>
            </div>
            <button class="btn btn-secondary" id="generateListBtn">Exporter la liste</button>
        </div>
    </div>
    
    <div id="addItemModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter/Modifier un article</h2>
            <form id="itemForm">
                
                <div class="form-group">
                    <label for="itemName">Nom de l'article</label>
                    <input type="text" id="itemName" required placeholder="Ex: Piles AA">
                </div>
                
                <div class="form-group">
                    <label for="itemRoom">Pi√®ce de stockage</label>
                    <select id="itemRoom" required>
                        <option value="">S√©lectionner une pi√®ce</option>
                        <option value="cuisine">Cuisine</option>
                        <option value="salon">Salon</option>
                        <option value="chambre">Chambre</option>
                        <option value="salle-bain">Salle de bain</option>
                        <option value="bureau">Bureau</option>
                        <option value="garage">Garage</option>
                        <option value="cave">Cave</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="itemQuantity">Quantit√©</label>
                    <input type="number" id="itemQuantity" required min="1" value="1">
                </div>

                <div class="form-group">
                    <label for="itemType">Type</label>
                    <select id="itemType" required>
                        <option value="non-consommable">Non-consommable (Permanent)</option>
                        <option value="consommable">Consommable (Expire)</option>
                    </select>
                </div>

                <div class="form-group hidden" id="expiryGroup">
                    <label>Date d'expiration</label>
                    <input type="date" id="itemExpiry">
                </div>

                <div class="form-group">
                    <label>Seuil de stock bas</label>
                    <input type="number" id="itemThreshold" placeholder="Ex: 2" min="0">
                </div>

                <div class="form-group">
                    <label>Photo (capture mobile ou upload)</label>
                    <div class="photo-row">
                        <input type="file" id="itemPhoto" accept="image/*" capture="environment">
                        <button type="button" id="clearPhotoBtn" class="btn-ghost">Retirer la photo</button>
                    </div>
                    <img id="photoPreview" class="photo-preview" alt="Aper√ßu" style="display:none;" />
                </div>

                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="itemNotes" rows="3" placeholder="Informations suppl√©mentaires..."></textarea>
                </div>

                <input type="hidden" id="itemId">

                <div class="form-buttons">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Annuler</button>
                    <button type="submit" class="btn btn-primary" id="submitBtn">Ajouter</button>
                </div>
            </form>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
